# TagVideoPlayer - Electron Application Specification

## Project Overview

Build a cross-platform video player application using Electron that supports both Windows and macOS. The application enables users to annotate video content with time-based tags and metadata, which are automatically persisted and reloaded for future playback sessions.

## Core Functionality

### Video File Handling

- Support drag-and-drop video files directly into the application window
- Automatic playback initiation upon file drop
- Support common video formats (mp4, mkv, avi, etc.)

### Timeline Tagging System

- Users can pause playback at any time to create annotations
- Each tag contains:
  - `time`: Current timestamp in seconds
  - `title`: Tag name/title
  - `description`: Detailed description of the annotation
- Tag data structure:

```json
{
  "timelines": [
    { "time": 0, "title": "測試", "description": "d1" },
    { "time": 90, "title": "測試2", "description": "d2" }
  ]
}
```

### Persistence and Auto-Loading

- Save tags to JSON file with the same name as the video file, stored in the same directory
- JSON filename format: `{video_filename}.json`
- Automatically load existing tags when the same video is opened
- Real-time tag list refresh after creating new annotations

### Interactive Playback

- Click any tag in the timeline list to jump video playback to that timestamp
- Smooth seeking and position update
- Clickable timeline navigation for quick access to tagged moments

## Development Requirements

### Step 1: Research Best Practices for Electron Applications

- Research and document best practices for building production-ready Electron applications
- Focus on cross-platform compatibility for Windows and macOS
- Document findings in `.github/copilot-instructions.md`

### Step 2: Command Parsing Implementation

- Identify and select the best package for command-line argument parsing
- Requirements:
  - Support for command parsing and validation
  - Cross-platform compatibility (Windows and macOS)
  - Well-maintained and widely used in the community
- Recommended approaches: `yargs`, `commander.js`, or `minimist`

### Step 3: Documentation Integration

- Retrieve official documentation for the selected command parsing package
- Append the documentation to `.github/copilot-instructions.md`
- Include usage examples relevant to the TagVideoPlayer project

### Step 4: Development Guidelines

Add comprehensive development guidelines to `.github/copilot-instructions.md`:

- **Build Requirement**: Run `npm start` or `npm run dev` every time code is edited before testing
- **Packaging**: Use `npm run build` to create platform-specific installers for Windows and macOS
- Development workflow documentation
- Code style guidelines for cross-platform compatibility
- Testing procedures for Windows and macOS
- Commit message conventions

## Technical Specifications

### Platform Support

- **Windows**: Full support with native Windows API integration where needed
- **macOS**: Full support with native macOS API integration where needed
- Shared codebase with platform-specific configuration

### Build & Packaging

- Use Electron's build tools for creating platform-specific installers
- Ensure code signing for macOS applications
- Create proper distribution packages for both Windows and macOS

## Output Artifacts

- Complete Electron application source code
- `.github/copilot-instructions.md` with Electron best practices, command parsing library documentation, and development guidelines
- Build scripts for Windows and macOS
- Configuration files for both platforms

